$.fn.touchMenu=function(e){var n={inmenu:!0,open:!1,clickTime:0},o=$(this),t=$.extend({action:"init",fadeAway:1e3,fadeAwayStart:200,startClick:50,openMenu:600,fullscreen:!1},e);o.addClass("touchMenu"),o.close=function(e){n.inmenu=!1,o.hasClass("open")&&(e?(o.removeClass("closing open"),n.open=!1):setTimeout(function(){o.removeClass("noclose").addClass("closing"),t.remover=setTimeout(function(){o.removeClass("closing open"),n.open=!1},t.fadeAway-t.fadeAwayStart)},t.fadeAwayStart))},o.stopclose=function(){n.inmenu=!0,o.hasClass("closing")&&(clearTimeout(t.remover),o.removeClass("closing").addClass("noclose"))},o.start=function(){o.addClass("clicking"),n.openMenu=setTimeout(function(){o.removeClass("clicking").addClass("open"),n.open=!0},t.openMenu)},o.sleep=function(e){for(var n=(new Date).getTime(),o=0;1e7>o&&!((new Date).getTime()-n>e);o++);};var a={},s={};o.move=function(e){o.hasClass("open")||(s.y=Math.abs(a.pageY-e.pageY),s.x=Math.abs(a.pageX-e.pageX),TweenMax.to(o,1.8,{css:{left:e.pageX,top:e.pageY},ease:Elastic.easeOut}),a={pageX:e.pageX,pageY:e.pageY})},o.stop=function(){o.removeClass("clicking"),clearTimeout(t.initClick),clearTimeout(n.openMenu),clearInterval(t.interval)},"init"==t.action?(o.on("mouseenter",function(){o.stopclose()}),o.on("mouseleave",function(){o.close()}),$(window).on("mousedown",function(e){n.clickTime=0,t.interval=setInterval(function(){n.clickTime++,n.clickTime>t.startClick&&o.start(e)},1)}),$(window).on("mousemove",function(e){o.move(e)}),$(window).on("mouseup",function(e){o.stop(e)}),$(window).on("click",function(){n.open&&!n.inmenu&&o.close(!0)})):"open"==t.action&&(n.open?o.close():o.start())},$.fn.touchMenuAction=function(){};
